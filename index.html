<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#000000">
<title>Two Sides of Forest</title>
<style>
  :root{
    /* Overlay-Farbe (wird per JS umgeschaltet) */
    --overlay: linear-gradient(90deg, rgba(5,20,40,0.75) 0%, rgba(0,0,0,0.35) 40%, rgba(10,30,50,0.75) 100%);
    --glass: rgba(255,255,255,.06);
    --stroke: rgba(255,255,255,.18);
    --text: rgba(255,255,255,.96);
    --sub:  rgba(255,255,255,.62);
    --accent:#a7c48c;
    --tab:#2a2a2a;
  }

  /* Basis – kein Scrollen, kein Bounce, full viewport */
  html, body{
    margin:0; height:100%; background:#000; color:var(--text);
    -webkit-text-size-adjust:100%; overflow:hidden; overscroll-behavior:none;
  }

  /* Hintergrund: WALD + Overlay. Bild bleibt immer, Overlay wechselt warm/kalt. */
  body::before{
    content:"";
    position:fixed; inset:0; z-index:0;
    background: var(--overlay), url("Forest-Background_2.png") center/cover no-repeat;
    filter: saturate(1.05);
    transition: background 0.6s ease;
  }

  /* App-Wrapper über dem Hintergrund */
  .app{
    position:relative; z-index:1;
    min-height:100vh; min-height:100svh; min-height:100dvh; min-height:100lvh;
    padding: calc(env(safe-area-inset-top) + 16px) 16px calc(env(safe-area-inset-bottom) + 16px);
    display:flex; align-items:center; justify-content:center;
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",Roboto,Helvetica,Arial,sans-serif;
  }

  .wrap{ width:min(92vw, 760px); display:grid; gap:18px; }

  .glass{
    backdrop-filter: blur(20px) saturate(150%); -webkit-backdrop-filter: blur(20px) saturate(150%);
    background:var(--glass); border:1px solid var(--stroke); border-radius:24px;
    padding:clamp(18px,4vw,28px);
    display:flex; align-items:center; justify-content:space-between; gap:clamp(16px,4vw,32px);
  }

  /* Headline-Card */
  .headline{
    display:flex; align-items:center; justify-content:space-between; gap:18px;
  }
  .hgroup{ line-height:1.05 }
  .h1{
    margin:0;
    font-weight:600;
    font-size:clamp(20px, 6.4vw, 42px);
    letter-spacing:.04em;
    text-transform:uppercase;
  }
  .h1 .dim{ opacity:.9 }
  .tagline{
    margin:.35rem 0 0; color:var(--sub);
    font-size:clamp(12px,3.2vw,14px); letter-spacing:.06em;
  }

  /* Player-Card */
  .title{ margin:0; font:500 clamp(18px,4.6vw,28px)/1.15 inherit; letter-spacing:.02em }
  .sub{ margin:.35rem 0 0; color:var(--sub); font-size:clamp(12px,3.4vw,15px) }
  .play{
    display:grid; place-items:center; width:clamp(56px,14vw,84px); aspect-ratio:1/1; border-radius:50%;
    border:1px solid var(--stroke);
    background:linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
    box-shadow: inset 0 0 18px rgba(255,255,255,.06), 0 10px 24px rgba(0,0,0,.45);
    cursor:pointer; transition:.2s; -webkit-tap-highlight-color:transparent;
  }
  .play:hover{ transform:scale(1.04); border-color:color-mix(in srgb, var(--accent) 50%, white 50%); box-shadow:0 0 32px color-mix(in srgb, var(--accent) 40%, transparent) }
  .play svg{ width:40%; height:40% } .play path{ fill:var(--accent) }
  audio{ display:none }

  /* Tabs */
  .tabs{ display:flex; flex-wrap:wrap; gap:10px; padding:4px }
  .tab{
    border:1px solid var(--stroke); background:var(--tab);
    color:#ddd; font-size:14px; padding:8px 12px; border-radius:999px; text-decoration:none; white-space:nowrap; transition:.2s;
  }
  .tab:hover{ opacity:.85 }
  .tab.active{ color:var(--text); border-color:var(--accent); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 25%, transparent) inset }

  .row{ display:flex; align-items:center; justify-content:space-between; gap:clamp(16px,4vw,32px) }
</style>
</head>
<body>

<div class="app">
  <div class="wrap">

    <!-- HEADLINE -->
    <div class="glass headline">
      <div class="hgroup">
        <h1 class="h1">TWO SIDES<br><span class="dim">OF FOREST</span></h1>
        <div class="tagline">Japan · Sound · Perception</div>
      </div>
    </div>

    <!-- PLAYER -->
    <div class="glass">
      <div class="info">
        <h2 class="title" id="title">Forest Sound</h2>
        <p class="sub">Kopfhörer empfohlen</p>
      </div>
      <button class="play" id="play" aria-label="Play/Pause">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path id="icon" d="M8 5v14l11-7z"/></svg>
      </button>
    </div>

    <!-- TABS -->
    <div class="glass">
      <div class="row" style="width:100%">
        <nav class="tabs" id="tabs"></nav>
      </div>
    </div>

    <audio id="aud" preload="auto"></audio>

  </div>
</div>

<script>
/* Exakte Dateinamen wie im Repo (inkl. Leerzeichen/Großschreibung) */
const TRACKS = {
  night:   { file: "Forest at Night.mp3",        title: "Forest at Night",        mood:"cool" },
  summer:  { file: "Forest at Summer.mp3",       title: "Forest at Summer",       mood:"warm" },
  thunder: { file: "Forest at Thunderstorm.mp3", title: "Forest at Thunderstorm", mood:"cool" },
  rain:    { file: "Forest in the Rain.mp3",     title: "Forest in the Rain",     mood:"warm" }
};

const aud   = document.getElementById('aud');
const btn   = document.getElementById('play');
const icon  = document.getElementById('icon');
const titleEl = document.getElementById('title');
const tabs  = document.getElementById('tabs');

function setIconPlaying(p){ icon.setAttribute('d', p ? 'M6 5h4v14H6zm8 0h4v14h-4z' : 'M8 5v14l11-7z'); }

function updateOverlay(mood){
  // kühl = Nacht/Gewitter | warm = Sommer/Regen
  const overlay = (mood === "cool")
    ? "linear-gradient(90deg, rgba(5,20,40,0.75) 0%, rgba(0,0,0,0.35) 40%, rgba(10,30,50,0.75) 100%)"
    : "linear-gradient(90deg, rgba(60,40,10,0.65) 0%, rgba(80,60,20,0.35) 40%, rgba(60,30,0,0.65) 100%)";
  document.documentElement.style.setProperty('--overlay', overlay);
}

function setTrack(key, autoplay=false){
  const t = TRACKS[key]; if(!t) return;
  aud.src = encodeURI(t.file);
  titleEl.textContent = t.title;
  [...tabs.querySelectorAll('a.tab')].forEach(a => a.classList.toggle('active', a.dataset.key === key));
  setIconPlaying(false);
  updateOverlay(t.mood);
  if(autoplay) aud.play().then(()=>setIconPlaying(true)).catch(()=>{});
}

function buildTabs(activeKey){
  tabs.innerHTML = '';
  Object.entries(TRACKS).forEach(([key, t])=>{
    const a = document.createElement('a');
    a.href = `?track=${encodeURIComponent(key)}`;
    a.textContent = t.title;
    a.className = 'tab' + (key===activeKey ? ' active':'');
    a.dataset.key = key;
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      history.replaceState(null,'',`?track=${encodeURIComponent(key)}`);
      setTrack(key, false);
    });
    tabs.appendChild(a);
  });
}

/* Start-Track aus URL oder Standard */
const params = new URLSearchParams(location.search);
const startKey = params.get('track') || 'night';
buildTabs(startKey);
setTrack(startKey, false);

/* Play/Pause */
btn.addEventListener('click', ()=>{
  if(aud.paused){ aud.play(); setIconPlaying(true); }
  else { aud.pause(); setIconPlaying(false); }
});
aud.addEventListener('pause', ()=> setIconPlaying(false));
aud.addEventListener('play',  ()=> setIconPlaying(true));
</script>
</body>
</html>
