<style>
  :root{
    --overlay: linear-gradient(90deg, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.25) 40%, rgba(0,0,0,0.6) 100%);
    --glass: rgba(255,255,255,.06);
    --stroke: rgba(255,255,255,.18);
    --text: rgba(255,255,255,.96);
    --sub:  rgba(255,255,255,.62);
    --accent:#a7c48c;
    --tab:#2a2a2a;
  }

  html, body{
    margin:0; height:100%; background:#000; color:var(--text);
    -webkit-text-size-adjust:100%; overflow:hidden; overscroll-behavior:none;
  }

  body::before{
    content:"";
    position:fixed; inset:0; z-index:0;
    background: var(--overlay), url("Forest-Background_2.png") center/cover no-repeat;
    filter:saturate(1.05);
    transition: background 0.6s ease;
  }

  .app{position:relative;z-index:1;display:flex;align-items:center;justify-content:center;
       min-height:100vh;min-height:100svh;min-height:100dvh;min-height:100lvh;
       padding:calc(env(safe-area-inset-top)+16px)16px calc(env(safe-area-inset-bottom)+16px);}
  .wrap{width:min(92vw,760px);display:grid;gap:18px;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",Roboto,Helvetica,Arial,sans-serif}
  .glass{backdrop-filter:blur(20px)saturate(150%);-webkit-backdrop-filter:blur(20px)saturate(150%);
         background:var(--glass);border:1px solid var(--stroke);border-radius:24px;
         padding:clamp(18px,4vw,28px);display:flex;align-items:center;justify-content:space-between;gap:clamp(16px,4vw,32px);}
  .title{margin:0;font:500 clamp(18px,4.6vw,28px)/1.15 inherit;letter-spacing:.02em}
  .sub{margin:.35rem 0 0;color:var(--sub);font-size:clamp(12px,3.4vw,15px)}
  .play{display:grid;place-items:center;width:clamp(56px,14vw,84px);aspect-ratio:1/1;border-radius:50%;
        border:1px solid var(--stroke);background:linear-gradient(145deg,rgba(255,255,255,.12),rgba(255,255,255,.04));
        box-shadow:inset 0 0 18px rgba(255,255,255,.06),0 10px 24px rgba(0,0,0,.45);
        cursor:pointer;transition:.2s;-webkit-tap-highlight-color:transparent;}
  .play:hover{transform:scale(1.04);border-color:color-mix(in srgb,var(--accent)50%,white50%);
              box-shadow:0 0 32px color-mix(in srgb,var(--accent)40%,transparent)}
  .play svg{width:40%;height:40%}.play path{fill:var(--accent)}
  audio{display:none}
  .tabs{display:flex;flex-wrap:wrap;gap:10px;padding:4px}
  .tab{border:1px solid var(--stroke);background:var(--tab);color:#ddd;font-size:14px;
       padding:8px 12px;border-radius:999px;text-decoration:none;white-space:nowrap;transition:.2s}
  .tab:hover{opacity:.85}
  .tab.active{color:var(--text);border-color:var(--accent);
              box-shadow:0 0 0 2px color-mix(in srgb,var(--accent)25%,transparent) inset}
</style>

<script>
const TRACKS = {
  night:   { file: "Forest at Night.mp3",        title: "Forest at Night",        mood:"cool" },
  summer:  { file: "Forest at Summer.mp3",       title: "Forest at Summer",       mood:"warm" },
  thunder: { file: "Forest at Thunderstorm.mp3", title: "Forest at Thunderstorm", mood:"cool" },
  rain:    { file: "Forest in the Rain.mp3",     title: "Forest in the Rain",     mood:"warm" }
};

const aud=document.getElementById('aud'),btn=document.getElementById('play'),
icon=document.getElementById('icon'),titleEl=document.getElementById('title'),
tabs=document.getElementById('tabs');

function setIconPlaying(p){icon.setAttribute('d',p?'M6 5h4v14H6zm8 0h4v14h-4z':'M8 5v14l11-7z');}

function updateOverlay(mood){
  let overlay;
  if(mood==="cool")
    overlay="linear-gradient(90deg, rgba(5,20,40,0.75) 0%, rgba(0,0,0,0.35) 40%, rgba(10,30,50,0.75) 100%)";
  else
    overlay="linear-gradient(90deg, rgba(60,40,10,0.65) 0%, rgba(80,60,20,0.35) 40%, rgba(60,30,0,0.65) 100%)";
  document.documentElement.style.setProperty('--overlay',overlay);
}

function setTrack(key,autoplay=false){
  const t=TRACKS[key]; if(!t) return;
  aud.src=encodeURI(t.file);
  titleEl.textContent=t.title;
  [...tabs.querySelectorAll('a.tab')].forEach(a=>a.classList.toggle('active',a.dataset.key===key));
  setIconPlaying(false);
  updateOverlay(t.mood);
  if(autoplay) aud.play().then(()=>setIconPlaying(true)).catch(()=>{});
}

function buildTabs(activeKey){
  tabs.innerHTML='';
  Object.entries(TRACKS).forEach(([key,t])=>{
    const a=document.createElement('a');
    a.href=`?track=${encodeURIComponent(key)}`;
    a.textContent=t.title;
    a.className='tab'+(key===activeKey?' active':'');
    a.dataset.key=key;
    a.addEventListener('click',e=>{
      e.preventDefault();
      history.replaceState(null,'',`?track=${encodeURIComponent(key)}`);
      setTrack(key,false);
    });
    tabs.appendChild(a);
  });
}

const params=new URLSearchParams(location.search);
const startKey=params.get('track')||'night';
buildTabs(startKey);
setTrack(startKey,false);

btn.addEventListener('click',()=>{
  if(aud.paused){aud.play();setIconPlaying(true);}
  else{aud.pause();setIconPlaying(false);}
});
aud.addEventListener('pause',()=>setIconPlaying(false));
aud.addEventListener('play',()=>setIconPlaying(true));
</script>
